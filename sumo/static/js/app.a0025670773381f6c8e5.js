webpackJsonp([1],{IZSO:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("7+uW"),o=a("mtWM"),r=a.n(o);r.a.defaults.baseURL="";var n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("div",{attrs:{id:"logo_frame"}}),t._v(" "),a("h1",[t._v("Sumo")]),t._v("\n  Project: "+t._s(t.id)+"\n  "),a("div",{attrs:{id:"content"}},[a("div",{attrs:{id:"sidebar"}},[a("h3",[t._v(t._s(t.id))]),t._v(" "),a("router-link",{attrs:{to:{name:"sumos",params:{projectId:this.id}}}},[t._v("SUMOS")])],1),t._v(" "),a("div",{attrs:{id:"main"}},[a("transition",{attrs:{name:"fade",mode:"out-in"}},[a("router-view")],1)],1)])])},staticRenderFns:[]};var i=a("VU/8")({props:["projectId"],data:function(){return{id:this.$route.params.projectId||this.projectId||"test_michael2"}},created:function(){this.$router.push({name:"sumos",params:{projectId:this.id}})}},n,!1,function(t){a("SvJJ")},null,null).exports,c={props:["projectId","id"],data:function(){return{cohorts:"",name:"",error:"",foa:"",activePanel:"summary",schema:null,stats:null,search:""}},created:function(){this.load(),this.get_schema(),this.getStats()},mounted:function(){},computed:{configsURL:function(){return"/projects/"+this.projectId+"/sumo"},foaList:function(){if(!this.foa)return[];try{return this.foa.split(",").map(function(t){return t.trim()})}catch(t){return console.log(t),console.log(this.foa),[]}},cohortList:function(){if(!this.cohorts)return[];try{return this.cohorts.split(",").map(function(t){return t.trim()})}catch(t){return console.log(t),console.log(this.cohorts),[]}}},methods:{save:function(){var t=this,e={cohorts:this.cohorts,foa:this.foa,name:this.name,_id:this.id};r.a.post(this.configsURL,e).then(function(e){t.activePanel="summary",t.load(),t.flash("Sumo saved","success",{timeout:2e3}),t.getStats()}).catch(function(e){t.error=e})},showAddList:function(t){return!this.foaList.map(function(t){return t.toLowerCase()}).includes(t.toLowerCase())},addFoa:function(t){return t=t.charAt(0).toUpperCase()+t.slice(1),!this.foaList.includes(t)&&(""!==this.foa&&(this.foa+=", "),this.foa+=t,!0)},load:function(){var t=this;r.a.get(this.configsURL+"/"+this.id).then(function(e){t.id=e.data._id,e.data.cohorts&&(t.cohorts=e.data.cohorts.toString()),e.data.foa&&(t.foa=e.data.foa.toString()),t.name=e.data.name||""}).catch(function(e){t.error=e})},getStats:function(){var t=this;r.a.get(this.configsURL+"/"+this.id+"/stats").then(function(e){t.stats=e.data,console.log(t.stats)}).catch(function(e){t.error=e})},get_schema:function(){var t=this;r.a.get("/projects/"+this.projectId+"/schema").then(function(e){t.schema=e.data.tables}).catch(function(t){})}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h1",[t._v("Sumo "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.name,expression:"name"}]},[t._v("- "+t._s(t.name))])]),a("p",[t._v("\n      Project "+t._s(t.projectId)+"\n      "),a("flash-message",{attrs:{transitionName:"slide-fade"}})],1),a("div",{staticClass:"nav"},[a("button",{class:"summary"==t.activePanel?"btn-primary":"btn-secondary",on:{click:function(e){t.activePanel="summary"}}},[t._v("Summary")]),t._v(" "),a("button",{class:"cohort"==t.activePanel?"btn-primary":"btn-secondary",on:{click:function(e){t.activePanel="cohort"}}},[t._v("Cohorts")]),t._v(" "),a("button",{class:"pairs"==t.activePanel?"btn-primary":"btn-secondary",on:{click:function(e){t.activePanel="pairs"}}},[t._v("Fields of analysis")])]),t._v(" "),a("transition-group",{staticClass:"panel",attrs:{name:"fade",mode:"out-in"}},["summary"==t.activePanel?a("div",{key:"summary",staticClass:"panel"},[a("h3",{staticStyle:{margin:"auto"}},[t._v("Label of analysis")]),t._v(" "),t._l(t.stats,function(e,s){return a("div",[a("h4",[t._v(t._s(s))]),t._v(" "),a("table",{staticClass:"table"},[a("tr",[a("th",[t._v("Cohort")]),t._v(" "),a("th",[t._v("Mean")]),t._v(" "),a("th",[t._v("Std")]),t._v(" "),a("th",[t._v("Median")]),t._v(" "),a("th",[t._v("IQR")]),t._v(" "),a("th",[t._v("OR")])]),t._v(" "),t._l(e.cohorts,function(e,s){return a("tr",[a("td",[t._v(t._s(s))]),t._v(" "),a("td",[t._v(t._s(e.mean))]),t._v(" "),a("td",[t._v(t._s(e.std))]),t._v(" "),a("td",[t._v(t._s(e.median))]),t._v(" "),a("td",[t._v(t._s(e.iqr))]),t._v(" "),a("td",[t._v(t._s(e.or))])])}),t._v(" "),a("tr",[a("td",[t._v("Difference")]),t._v(" "),a("td",[t._v(t._s(e.comparison.mean))]),t._v(" "),a("td",[t._v(t._s(e.comparison.std))]),t._v(" "),a("td",[t._v(t._s(e.comparison.median))]),t._v(" "),a("td",[t._v(t._s(e.comparison.iqr))]),t._v(" "),a("td",[t._v(t._s(e.comparison.or))])]),t._v(" "),a("tr",[a("td",[t._v("Matched Pairs")]),t._v(" "),a("td",[t._v(t._s(e.matched_pairs.mean))]),t._v(" "),a("td",[t._v(t._s(e.matched_pairs.std))]),t._v(" "),a("td",[t._v(t._s(e.matched_pairs.median))]),t._v(" "),a("td",[t._v(t._s(e.matched_pairs.iqr))]),t._v(" "),a("td",[t._v(t._s(t._f("1")(e.matched_pairs.or)))])])],2),t._v(" "),a("p",[t._v("Â ")])])})],2):t._e(),t._v(" "),"cohort"==t.activePanel?a("div",{key:"cohorts",staticClass:"panel"},[a("h4",[t._v("Sumo Name")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],ref:"name",attrs:{name:"new_cohort",type:"text",placeholder:"SUMO name"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),t._v(" "),a("p"),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.error,expression:"error"}],staticClass:"alert-danger"},[t._v(t._s(t.error))]),t._v(" "),a("h4",[t._v("Cohorts")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.cohorts,expression:"cohorts"}],staticStyle:{height:"90px","font-size":"large"},attrs:{placeholder:"enter cohort labels/names, separated by commas, eg. Cohort1, Cohort2, Cohort 3; "},domProps:{value:t.cohorts},on:{input:function(e){e.target.composing||(t.cohorts=e.target.value)}}}),t._v(" "),a("button",{staticClass:"btn-success",attrs:{name:"save",type:"button"},on:{click:t.save}},[t._v("Save")])]):t._e(),t._v(" "),"pairs"==t.activePanel?a("div",{key:"pairs",staticClass:"panel"},[a("p"),t._v(" "),a("h4",[t._v("Fields of analysis")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.foa,expression:"foa"}],staticStyle:{height:"90px","font-size":"large"},attrs:{rows:"3",placeholder:"enter field names, seperated by commas, eg. Person.provider_id, Person.year_of_birth"},domProps:{value:t.foa},on:{input:function(e){e.target.composing||(t.foa=e.target.value)}}}),t._v(" "),a("button",{staticClass:"btn-success",attrs:{name:"save",type:"button"},on:{click:t.save}},[t._v("Save")]),t._v(" "),a("p"),t._v(" "),a("h3",[t._v("OMOP Fields "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],attrs:{type:"text",placeholder:"search"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}})]),t._v(" "),t.schema?t._e():a("div",[t._v("Loading...")]),t._v(" "),t._l(t.schema,function(e,s){return a("div",t._l(e.columns,function(e){return a("div",{staticClass:"field-info"},[a("strong",[t._v(t._s(t._f("capitalize")(s))+"."+t._s(e.name))]),t._v(" "),a("div",[t._v(t._s(e.description)+" "),a("i",[t._v("Type: "+t._s(e.type))])]),t._v(" "),a("button",{directives:[{name:"show",rawName:"v-show",value:t.showAddList(s+"."+e.name),expression:"showAddList(table_name + '.' + column.name)"}],staticClass:"btn-info float-right",on:{click:function(a){return t.addFoa(s+"."+e.name)}}},[t._v("Add")])])}),0)})],2):t._e()])],1)},staticRenderFns:[]};var v=a("VU/8")(c,d,!1,function(t){a("d75f")},"data-v-21d8b362",null).exports;r.a.defaults.baseURL="";var u={data:function(){return console.log("--\x3e"+this.$route.params.projectId),{projectId:this.$route.params.projectId,id:this.$route.params.id}},components:{Project:i,Sumo:v}},m={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[this.id?e("div",{attrs:{id:"main"}},[e("Sumo",{attrs:{projectId:this.projectId,id:this.id}})],1):e("Project",{attrs:{projectId:"test_michael2"}})],1)},staticRenderFns:[]};var h=a("VU/8")(u,m,!1,function(t){a("rEC/")},null,null).exports,l=a("/ocq"),_={props:["projectId"],data:function(){return{sumos:[],name:"",error:""}},created:function(){var t=this;r.a.interceptors.request.use(function(t){return t}),console.log(this.sumosURL),r.a.get(this.sumosURL).then(function(e){console.log(e.data),t.sumos=e.data}).catch(function(e){t.error=e})},computed:{sumosURL:function(){return"/projects/"+this.projectId+"/sumo"}},methods:{add:function(t){var e=this,a={name:this.name,cohorts:[],matched_pairs:[]};r.a.post(this.configsURL,a).then(function(t){a._id=t.data[0],e.configs.push(a)})},csvLength:function(t){return t.split(",").length}}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("flash-message",{attrs:{transitionName:"slide-fade"}}),t._v(" "),a("form",[a("router-link",{staticClass:"btn btn-primary",attrs:{to:{name:"createSumo",projectId:t.projectId},tag:"button"}},[t._v("Add SUMO Processor")]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.error,expression:"error"}],staticClass:"alert-danger"},[t._v(t._s(t.error))]),t._v(" "),a("p"),t._v(" "),a("table",{staticClass:"table table-striped table-hover"},[t._m(0),t._v(" "),t._l(t.sumos,function(e){return a("tr",[a("td",[a("router-link",{attrs:{to:{name:"sumo",params:{id:e._id}}}},[t._v(t._s(e.name||e._id))])],1),t._v(" "),a("td",[t._v("\n                  "+t._s(e.name)+"\n              ")]),t._v(" "),a("td",[t._v("\n                  "+t._s(e.cohorts?t.csvLength(e.cohorts):"-")+"\n              ")]),t._v(" "),a("td",[t._v("\n                  "+t._s(e.matched_pairs?t.csvLength(e.matched_pairs):"-")+"\n              ")])])})],2)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("th",[this._v("Id")]),e("th",[this._v("Name")]),e("th",[this._v("No. Cohorts")]),e("th",[this._v("Matched Pairs")])])}]};var f=a("VU/8")(_,p,!1,function(t){a("tcbr")},"data-v-1da3b21e",null).exports,g={props:["projectId"],data:function(){return{cohorts:"",name:"",error:"",matchedPairs:"",schema:null}},mounted:function(){},computed:{configsURL:function(){return"/projects/"+this.projectId+"/sumo"},matchedPairsList:function(){if(!this.matchedPairs)return[];try{return this.matchedPairs.split(",").map(function(t){return t.trim()})}catch(t){return console.log(t),console.log(this.matchedPairs),[]}}},created:function(){this.get_schema()},methods:{save:function(){var t=this,e={cohorts:this.cohorts,matched_pairs:this.matchedPairs,name:this.name};r.a.post(this.configsURL,e).then(function(e){var a=e.data._id;console.log(a),t.flash("Sumo saved","success",{timeout:2e3}),t.$router.push({name:"sumo",params:{id:a}})}).catch(function(e){t.error=e})},get_schema:function(){var t=this;r.a.get("/projects/"+this.projectId+"/schema").then(function(e){t.schema=e.data.tables}).catch(function(t){})},showAddList:function(t){return!this.matchedPairsList.map(function(t){return t.toLowerCase()}).includes(t.toLowerCase())},addMatchedPair:function(t){if(t=t.charAt(0).toUpperCase()+t.slice(1),this.matchedPairsList.includes(t))return!1;""!==this.matchedPairs&&(this.matchedPairs+=", "),this.matchedPairs+=t}}},b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h1",[t._v("New Sumo")]),t._v(" "),a("p"),t._v(" "),a("div",{key:"cohort_panel",staticClass:"panel"},[a("h4",[t._v("Label of analysis")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],ref:"name",attrs:{name:"new_cohort",type:"text",placeholder:"SUMO name"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),t._v(" "),a("p"),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.error,expression:"error"}],staticClass:"alert-danger"},[t._v(t._s(t.error))]),t._v(" "),a("h4",[t._v("Cohorts")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.cohorts,expression:"cohorts"}],staticStyle:{height:"90px","font-size":"large"},attrs:{placeholder:"enter cohort names, separated by command, eg. A, B, C etc.."},domProps:{value:t.cohorts},on:{input:function(e){e.target.composing||(t.cohorts=e.target.value)}}}),t._v(" "),a("p"),t._v(" "),a("h4",[t._v("Fields of analysis")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.matchedPairs,expression:"matchedPairs"}],staticStyle:{height:"90px","font-size":"large"},attrs:{rows:"3",placeholder:"enter OMOP field names, seperated by commas"},domProps:{value:t.matchedPairs},on:{input:function(e){e.target.composing||(t.matchedPairs=e.target.value)}}}),t._v(" "),a("p"),t._v(" "),a("button",{staticClass:"btn-success",attrs:{name:"save",type:"button"},on:{click:t.save}},[t._v("Save")]),t._v(" "),a("p"),t._v(" "),a("h3",[t._v("OMOP Fields")]),t._v(" "),t.schema?t._e():a("div",[t._v("Loading...")]),t._v(" "),t._l(t.schema,function(e,s){return a("div",t._l(e.columns,function(e){return a("div",{staticClass:"field-info"},[a("strong",[t._v(t._s(t._f("capitalize")(s))+"."+t._s(e.name))]),t._v(" "),a("div",[t._v(t._s(e.description)+" "),a("i",[t._v("Type: "+t._s(e.type))])]),t._v(" "),a("button",{directives:[{name:"show",rawName:"v-show",value:t.showAddList(s+"."+e.name),expression:"showAddList(table_name + '.' + column.name)"}],staticClass:"btn-info float-right",on:{click:function(a){return t.addMatchedPair(s+"."+e.name)}}},[t._v("Add")])])}),0)})],2)])},staticRenderFns:[]};var y=[{name:"sumo",path:"/projects/:projectId/sumo/:id",component:v,props:!0},{name:"createSumo",path:"/projects/:projectId/sumo/create",component:a("VU/8")(g,b,!1,function(t){a("IZSO")},"data-v-57b442e4",null).exports,props:!0},{name:"sumos",path:"/projects/:projectId/sumos",component:f,props:!0},{name:"project",path:"/projects/:projectId",component:i,props:!0}],P=a("pERe"),w=a.n(P);s.a.use(w.a),s.a.use(l.a),s.a.filter("capitalize",function(t){return t?(t=t.toString()).charAt(0).toUpperCase()+t.slice(1):""}),a("ayht");var j=new l.a({routes:y});s.a.config.productionTip=!1,new s.a({el:"#app",router:j,components:{App:h},template:"<App/>"})},SvJJ:function(t,e){},ayht:function(t,e){},d75f:function(t,e){},"rEC/":function(t,e){},tcbr:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.a0025670773381f6c8e5.js.map